# Content Model

- Design goals
  - Fast input
  - Structure for readability
  - Free-form editing
  - Copy/Cut/Paste friendly
  - Link integrity
  - Global searchability
- Good to have
  - Procedual content
    - RSS subscription
    - URL crawling
    - TODO list based on Query
    - Date based reminders

## Design considerations

1. Link integrity vs. Free-form editing
   1. Transclusion vs. Editability
2. Derive structure from content vs. decouple structure from content
   1. Syntax highlighting
3. Readonly content vs. Editability
   1. Holes in the `contenteditable` tree
4. ID display vs. readability (markdown as counter-example)
5. Multi-line vs. Single-line
   1. Verticle cursor navigation and alignment

## Ideas

- Single root tree for the entire DB
  - Breadcrum for navigation assist
- `@directive(args)` for behavior
  - Some directives might allow actions: e.g. sort, crawl, etc
  - Might require AST parser if support multi-line
- `:attr(val)` for derived attributes
  - Example: `:refBy(32)`, `:id(1751203)`
  - Non-editable, but should be selectable
  - Might be actionable
- ID handling
  - Generate ID eagerly. Only referenced node displays its ID
  - Generate ID lazily when incoming link is created
    - Drawback: touching multiple files when creating one link
    - Garbage collection when ref count down to 0
- Tri-state expander: `-` `+` `‚óè`
- Animated viewport panning
- Special nodes
  - Generated by algorithm, doesn't exist in DB
    - Read-only
    - Create on edit
  - Reference to other node
    - Read-only
    - Synced edit
- Trais of list
  - Editable list
  - Read-only list
  - Temporary list
    - Destoryed after session
- Traits of text
  - Editable
  - Actionable
  - Copyable
  - Temporary
  - Readable (Base)
- Two column layout: One for data, another for metadata
  - data and metadata easily out-of-sync when cut/paste

## Sample content for testing

```
+ New @inbox
- Dailies
  + June 6, 2022
	+ June 4, 2022
- Reading list
  + Book 1
  + Book 2 @id(3h9x8s98sz)
	- MobyDick
	  - A good story, five out of five
- Bookmarks
  + SmashingMagazine
		@url(https://smashing.com)
		@rss(https://smashing.com/rss.xml)
		- How to build it better @url
- Course list
  - MIT
	  - Performance system engineering
      - Lecture 5: bithack
			  - Inline swap
				  - x = x ^ y
					  y = x ^ y
						x = x ^ y @lang(C)
```
